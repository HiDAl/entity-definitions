domain: INFRA
type: HOST
goldenTags:
- account
- windowsPlatform
- linuxDistribution
- aws.awsRegion
- aws.region
- aws.availabilityZone
- aws.accountId
- azure.regionName
- azure.subscriptionId
- azure.resourceGroup
- gcp.zone
- gcp.projectId
compositeMetrics:
  goldenMetrics:
  - golden_metrics.yml
  summaryMetrics:
  - summary_metrics.yml
configuration:
  entityExpirationTime: DAILY
  alertable: true

  #  SELECT entityGuid (target), nodeName (source) FRom Span where nodeName is not null
  #  existing relationship
relationships:
  - provider: newrelic
    eventType: Span
    source:
      domainId: nodeName
    relationship: HOSTS
    target:
      guid: entityGuid
    conditions:
      - attribute: nodeName #verify attr exists

